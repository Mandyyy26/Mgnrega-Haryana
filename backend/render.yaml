services:
  - type: web
    name: mgnrega-backend
    env: node
    region: singapore
    plan: free

    buildCommand: cd backend && npm install && npm run build
    startCommand: cd backend && npm start

    envVars:
      # Database
      - key: DB_USER
        value: mandy

      - key: DB_HOST
        value: dpg-d43i1sur433s739hmmm0-a.singapore-postgres.render.com

      - key: DB_NAME
        value: mgnrega_haryana

      - key: DB_PASSWORD
        scope: run
        value: DlqecuqHRTzK1FH9O9zhlG3CAyLPGSX5

      - key: DB_PORT
        value: "5432"

      # Redis
      - key: REDIS_HOST
        value: handy-aphid-32428.upstash.io

      - key: REDIS_PORT
        value: "6379"

      - key: REDIS_PASSWORD
        scope: run
        value: AX6sAAIncDJkMzY5ODFiMDM0ZjM0MzZmYWI5NmEwNzBjNGFhYTFlOHAyMzI0Mjg

      # Server Config
      - key: PORT
        value: "3001"

      - key: NODE_ENV
        value: production

      - key: LOG_LEVEL
        value: info

      # API Keys
      - key: ADMIN_API_KEY
        scope: run
        value: secret_key

      # Cache TTL
      - key: CACHE_DISTRICTS_TTL
        value: "86400"

      - key: CACHE_SCHEMES_TTL
        value: "86400"

      - key: CACHE_RANKINGS_TTL
        value: "21600"

      - key: CACHE_BUDGET_TTL
        value: "7200"

      - key: CACHE_TRENDS_TTL
        value: "3600"
